dist: xenial   # required for Python >= 3.7
language: python

jobs:
  fast_finish: true
  include:
    - python: 3.6
      env:
        - TOX_ENV=py36-dj22-drf39
        - TOX_ENV=py36-dj22-drf310
        - TOX_ENV=py36-dj31-drf39
        - TOX_ENV=py36-dj31-drf310
        - TOX_ENV=py36-dj32-drf39
        - TOX_ENV=py36-dj32-drf310
    - python: 3.7
      env:
        - TOX_ENV=py37-dj22-drf39
        - TOX_ENV=py37-dj22-drf310
        - TOX_ENV=py37-dj31-drf39
        - TOX_ENV=py37-dj31-drf310
        - TOX_ENV=py37-dj32-drf39
        - TOX_ENV=py37-dj32-drf310
    - python: 3.8
      env:
        - TOX_ENV=py38-dj22-drf39
        - TOX_ENV=py38-dj22-drf310
        - TOX_ENV=py38-dj31-drf39
        - TOX_ENV=py38-dj31-drf310
        - TOX_ENV=py38-dj32-drf39
        - TOX_ENV=py38-dj32-drf310
    - python: 3.9
      env:
        - TOX_ENV=py39-dj22-drf39
        - TOX_ENV=py39-dj22-drf310
        - TOX_ENV=py39-dj31-drf39
        - TOX_ENV=py39-dj31-drf310
        - TOX_ENV=py39-dj32-drf39
        - TOX_ENV=py39-dj32-drf310

install:
  - travis_retry pip install "tox~=3.22.0" "coverage<4" "setuptools<40.0.0"

script:
  - tox -ve $TOX_ENV

after_success:
  - pip install codecov
  - codecov -e TOX_ENV
